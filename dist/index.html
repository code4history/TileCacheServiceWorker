<html>
<body>
aaaabbbb
</body>
<script>
    async function run() {
        if ('serviceWorker' in navigator) {
            try {
                const reg = await navigator.serviceWorker.register('./sw.js', {scope: './'});
                console.log('Registration succeeded. Scope is ' + reg.scope);
                try {
                    const pong = await fetch('https://tilecache.example.com/api/ping');
                    if (pong) {
                        const res = await fetch('https://tilecache.example.com/api/add?mapID=piyo&type=xyz&width=255&height=1024&url=http://hoge.com/hoge/hoge');
                        res.text().then(txt => console.log(txt));
                        const res2 = await fetch('https://tilecache.example.com/api/add?mapID=hoge&type=wmts&minLat=35.0&maxLat=35.1&minLng=135.0&maxLng=135.1&minZoom=17&maxZoom=18&url=http://hoge.com/hoge/hoge');
                        res2.text().then(txt => console.log(txt));
                        const res3 = await fetch('https://tilecache.example.com/api/add?mapID=fuga&type=wmts&minZoom=17&maxZoom=18&url=http://hoge.com/hoge/hoge');
                        res3.text().then(txt => console.log(txt));
                    }
                } catch (err) {
                    console.log(err);
                }
            } catch(err) {
                // registration failed
                console.log('Registration failed with ' + err);
            }
        }
    }
    run();
</script>
</html>